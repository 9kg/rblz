<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta content="telephone=no,email=no" name="format-detection"><title>遊びに来て</title><link rel="stylesheet" href="../css/base.css" media="screen"></head><body class="page"><div class="loading"><div class="loading_box"><i class="loading_circle"></i></div></div><div class="content pull-to-refresh-content task_friend_container infinite-scroll"><div class="pull-to-refresh-layer"><div class="preloader"></div><div class="pull-to-refresh-arrow"></div></div><div class="list-block"></div></div><script src="../js/base.js" charset="utf-8"></script><script>$(function(){function a(a,e){var i=[];if(a.length)$.each(a,function(a,e){var t=$('<div class="content-block-title load_item_'+(a+1)+'">'+e.log_date+"</div>");i.push(t);var n=$('<ul class="load_item_'+(a+1)+'">');$.each(e.log_content,function(a,e){var i=e.task_name,t=e.friend_name;i&&i.length>4&&(i=i.substr(0,4)+"...",t=t.substr(0,4)+"...");var l=$('<li class="item-content"><div class="item-inner"><div class="item-title"><span class="friend_name">'+t+'</span> は <span class="task_name">'+i+'</span> を完了 </div><div class="item-after">+ '+e.task_price+" Pt</div></div></li>");l.data("info",e),n.append(l)}),i.push(n)});else{var t=$('<p class="no_data">まだ記録はありません</p>');i.push(t)}e?$(".list-block").append(i):$(".list-block").html(i)}var e=!1,i=10,t=1;base.native("render",{cur_page:t,page_size:i,callback:function(e){a(e.data),t++,e.data.length===i?$(".infinite-scroll").append($('<div class="infinite-scroll-preloader"><div class="preloader"></div></div>')):$.detachInfiniteScroll($(".infinite-scroll")),base.removeLoading(100)}}),$(document).on("tap",".item-content",function(){var a=$(this).data("info"),e='<ul class="dialog_detail"><li><span class="dialog_detail_desc">お友達</span>'+a.friend_name+'</li><li><span class="dialog_detail_desc">任務名</span>'+a.task_name+'</li><li><span class="dialog_detail_desc">完成時間</span>'+a.task_time+'</li><li><span class="dialog_detail_desc">リベート</span>'+a.task_price+"</li></ul>";$.modal({title:'<span style="color: #34bd4b;">リベート詳細</span>',text:e,buttons:[{text:"OK"}]})}).on("refresh",".pull-to-refresh-content",function(e){var t=base.native("render",{cur_page:1,page_size:i,callback:function(e){a(e.data),base.refresh(1)}});t===!1&&($.pullToRefreshDone(".pull-to-refresh-content"),$(".toast").remove(),$.toast("後で再度お試しください"))}).on("infinite",".infinite-scroll",function(){if(!e){e=!0;var n=base.native("render",{cur_page:t,page_size:i,callback:function(n){var l=n.data.length;e=!1,l<i&&($.detachInfiniteScroll($(".infinite-scroll")),$(".infinite-scroll-preloader").remove()),a(n.data,!0),t++,$.refreshScroller()}});if(n===!1){e=!1,!$(".toast").length&&$.toast("後で再度お試しください");var l=$(".infinite-scroll");setTimeout(function(){l.trigger("infinite")},600)}}})})</script></body></html>