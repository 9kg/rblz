<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta content="telephone=no,email=no" name="format-detection"><title>遊びに来て</title><link rel="stylesheet" href="../css/base.css" media="screen"></head><body class="page"><div class="loading"><div class="loading_box"><i class="loading_circle"></i></div></div><div class="content pull-to-refresh-content redeem_records_container infinite-scroll"><div class="pull-to-refresh-layer"><div class="preloader"></div><div class="pull-to-refresh-arrow"></div></div><div class="list-block"></div></div><script src="../js/base.js" charset="utf-8"></script><script>$(function(){function a(a,s){var n=[];if(a.length)$.each(a,function(a,s){var e=$('<div class="content-block-title load_item_'+(a+1)+'">'+s.log_date+"</div>");n.push(e);var i=$('<ul class="load_item_'+(a+1)+'">');$.each(s.log_content,function(a,s){var n=['<span class="iconfont icon_false1"></span><span class="redeem_goods">'+s.goods+"</span>交換失敗，"+s.point+"ポイントを返還完了",'<span class="iconfont icon_doing"></span><span class="redeem_goods">'+s.goods+"</span>交換中, "+s.point+"ポイントがかかります。",'<span class="iconfont icon_true1"></span><span class="redeem_goods">'+s.goods+"</span>交換完了。"],e=$('<li class="item-content item-link item_'+["false","doing","true"][+s.status+1]+'"><div class="item-inner"><div class="item-title">'+n[+s.status+1]+"</div></div></li>");e.data("info",s),i.append(e)}),n.push(i)});else{var e=$('<p class="no_data">まだ交換記録がありません</p>');n.push(e)}s?$(".list-block").append(n):$(".list-block").html(n)}var s=!1,n=10,e=1;base.native("render",{cur_page:e,page_size:n,callback:function(s){a(s.data),e++,s.data.length===n?$(".infinite-scroll").append($('<div class="infinite-scroll-preloader"><div class="preloader"></div></div>')):$.detachInfiniteScroll($(".infinite-scroll")),base.removeLoading(100)}}),$(document).on("click",".item-link",function(){var a=$(this).data("info"),s=['<span class="iconfont icon_false"></span>交換失敗','<span class="iconfont icon_time"></span>交換中','<span class="iconfont icon_true"></span>交換完了'][+a.status+1],n=["false","doing","true"][+a.status+1],e=["原因","詳細","カードNo."][+a.status+1],i='<ul class="dialog_detail"><li><span class="dialog_detail_desc">商品名</span>'+a.goods+'</li><li><span class="dialog_detail_desc">申込み日付</span>'+a.apply_time+'</li><li><span class="dialog_detail_desc">審査日付</span>'+a.review_time+'</li><li><span class="dialog_detail_desc">'+e+"</span>"+a.msg+"</li></ul>";$.modal({title:'<span class="redeem_status_'+n+'">'+s+"</span>",text:i,buttons:[{text:"OK"}]})}).on("refresh",".pull-to-refresh-content",function(s){var e=base.native("render",{cur_page:1,page_size:n,callback:function(s){a(s.data),base.refresh(1)}});e===!1&&($.pullToRefreshDone(".pull-to-refresh-content"),$(".toast").remove(),$.toast("後で再度お試しください"))}).on("infinite",".infinite-scroll",function(){if(!s){s=!0;var i=base.native("render",{cur_page:e,page_size:n,callback:function(i){var t=i.data.length;s=!1,t<n&&($.detachInfiniteScroll($(".infinite-scroll")),$(".infinite-scroll-preloader").remove()),a(i.data,!0),e++,$.refreshScroller()}});if(i===!1){s=!1,!$(".toast").length&&$.toast("後で再度お試しください");var t=$(".infinite-scroll");setTimeout(function(){t.trigger("infinite")},600)}}})})</script></body></html>